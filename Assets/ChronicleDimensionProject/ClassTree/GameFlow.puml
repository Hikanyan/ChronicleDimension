@startuml
title ゲームの全体的な流れ

start

:ログイン;
if (初回ログインまたは日付変更?) then (はい)
    :ログインボーナス表示;
    :報酬受取(経験値&コインorアイテム);
else (いいえ)
endif

:ゲーム選択;

if (音量設定?) then (はい)
    :音量調整;
else (いいえ)
endif

split 
    :リズムゲーム選択(メインゲーム);
    if (ノーツの速さ設定?) then (はい)
        :ノーツの速さ調整;
    else (いいえ)
    endif

    if (オンライン対戦?) then (はい)
        :オンラインマッチメイキング;
    else (いいえ)
    endif

    :楽曲選択;
    if (チュートリアル?) then (はい)
        :チュートリアル表示;
    else (いいえ)
    endif

    :ゲームスタート;
    while (楽曲プレイ中?) is (はい)
        :ノーツをタップ;
    endwhile
    :スコア表示;
    :リザルト;
    :報酬受取(経験値&コイン);

split again
    :アクションゲーム選択(ミニゲーム扱い);
    if (オンライン対戦?) then (はい)
        :オンラインマッチメイキング;
    else (いいえ)
    endif

    :ステージ選択;
    if (チュートリアル?) then (はい)
        :チュートリアル表示;
    else (いいえ)
    endif

    :ゲームスタート;
    while (ゲームプレイ中?) is (はい)
        :敵を倒す;
        if (ボス戦?) then (はい)
            :ボスを倒す;
        endif
    endwhile

    :ステージクリア;
    :リザルト;
    :報酬受取(経験値&コイン);

split again
    :ガチャ選択;
    :ガチャの説明と価格表示;
    if (ガチャを回す?) then (はい)
        :コインまたはジェム消費;
        :ガチャ回転;
        :結果表示;
        :報酬受取(アイテム);
    else (いいえ)
    endif
endsplit

:プレイヤーのレベルアップ確認;
if (レベルアップ?) then (はい)
    :レベルアップ表示と報酬;
endif

:ゲームメニューに戻る;

stop

@enduml
